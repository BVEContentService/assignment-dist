(function(t){function e(e){for(var a,o,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0781":function(t,e,s){},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},"15cd":function(t,e,s){},2:function(t,e){},3:function(t,e){},4:function(t,e){},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=i(t);return s(e)}function i(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id="4678"},5:function(t,e){},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("d3b7");var a=s("2b0e"),n=s("bc3a"),i=s.n(n),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-spin",{attrs:{spinning:t.networkOverlayState,size:"large",delay:300}},[!t.collapsed&&t.breakpointBroken?s("div",{staticClass:"sider-mask",on:{click:function(e){t.collapsed=!0}}}):t._e(),s("a-layout",{attrs:{id:"main-layout"}},[s("a-layout-sider",{attrs:{breakpoint:"lg","collapsed-width":"0"},on:{breakpoint:t.onBreakpoint},model:{value:t.collapsed,callback:function(e){t.collapsed=e},expression:"collapsed"}},[s("div",{staticClass:"logo"},[t._v(t._s(t.userName))]),s("a-menu",{attrs:{theme:"dark",mode:"inline","selected-keys":t.menuSelectedItems},on:{click:t.onMenuClick}},[0==t.privilege?s("a-menu-item",{key:"/"},[s("a-icon",{attrs:{type:"login"}}),s("span",{staticClass:"nav-text"},[t._v("登入")])],1):t._e(),1==t.privilege||2==t.privilege?s("a-menu-item",{key:"/students/view"},[s("a-badge",{attrs:{count:t.assignmentCount,offset:[-11,0]}},[s("a-icon",{attrs:{type:"idcard"}})],1),s("span",{staticClass:"nav-text"},[t._v("我的未交作业")])],1):t._e(),1==t.privilege||2==t.privilege?s("a-menu-item",{key:"/assignments/list"},[s("a-icon",{attrs:{type:"snippets"}}),s("span",{staticClass:"nav-text"},[t._v(t._s(t.privilege>=2?"课代表录入":"班级全部作业"))])],1):t._e(),3==t.privilege?s("a-menu-item",{key:"/students/list"},[s("a-icon",{attrs:{type:"idcard"}}),s("span",{staticClass:"nav-text"},[t._v("学生情况")])],1):t._e(),3==t.privilege?s("a-menu-item",{key:"/assignments/list"},[s("a-icon",{attrs:{type:"snippets"}}),s("span",{staticClass:"nav-text"},[t._v("作业查看/布置")])],1):t._e(),3==t.privilege?s("a-menu-item",{key:"/classes/list"},[s("a-icon",{attrs:{type:"edit"}}),s("span",{staticClass:"nav-text"},[t._v("班级编辑/名单修改")])],1):t._e(),3==t.privilege?s("a-menu-item",{key:"/account"},[s("a-icon",{attrs:{type:"user"}}),s("span",{staticClass:"nav-text"},[t._v("账号管理/邀请")])],1):t._e(),s("a-menu-item",{key:"/about"},[s("a-icon",{attrs:{type:"info-circle"}}),s("span",{staticClass:"nav-text"},[t._v("关于")])],1),t.privilege>=1?s("a-menu-item",{key:"logout"},[s("a-icon",{attrs:{type:"logout"}}),s("span",{staticClass:"nav-text"},[t._v("退出账号")])],1):t._e()],1)],1),s("a-layout",[s("a-layout-content",[s("div",{style:{padding:"24px",background:"#fff",minHeight:"100%"}},[s("router-view"),s("div",{style:{marginTop:"3em"}},[t._v(" \u7A0B\u5E8F\u8BBE\u8BA1\uFF1A 2019 \u7EA7 12 \u73ED \u5F20\u535A\u8F69 ")])],1)])],1)],1)],1)},r=[],l=s("5530"),c=(s("ac1f"),s("5319"),s("2ca0"),new a["a"]),u=c,d=s("2f62"),m={data:function(){return{collapsed:!1,breakpointBroken:!1,menuSelectedItems:[],networkOverlayState:!1}},methods:{onMenuClick:function(t){"logout"==t.key?(this.$store.commit("logout"),u.$emit("logout")):t.key!=this.$router.currentRoute.fullPath&&this.$router.replace(t.key)},onBreakpoint:function(t){this.breakpointBroken=t},setSelectedItem:function(t){t.startsWith("/assignments")?this.menuSelectedItems=["/assignments/list"]:t.startsWith("/students")?this.privilege>=3?this.menuSelectedItems=["/students/list"]:this.menuSelectedItems=["/students/view"]:this.menuSelectedItems=[t]}},computed:Object(l["a"])(Object(l["a"])({},Object(d["b"])(["privilege"])),{},{assignmentCount:function(){return this.$store.state.profile&&this.$store.state.profile.AssignmentCount?this.$store.state.profile.AssignmentCount:0},userName:function(){return this.$store.state.profile&&this.$store.state.profile.Name?this.$store.state.profile.Name:this.$store.getters.privilege>=3?"管理界面":"作业查询"}}),mounted:function(){var t=this;u.$on("setNetworkOverlay",(function(e){t.networkOverlayState=e})),u.$on("logout",(function(){t.$router.replace("/")})),this.$router.afterEach((function(e){t.setSelectedItem(e.path)})),this.setSelectedItem(this.$router.currentRoute.path)}},p=m,h=(s("ef79"),s("2877")),f=Object(h["a"])(p,o,r,!1,null,"75f4bd26",null),g=f.exports,b=s("8c4f"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-card",{staticStyle:{width:"500px","max-width":"100%",margin:"auto"}},[s("a-tabs",{attrs:{"default-active-key":"1"}},[s("a-tab-pane",{key:"1",attrs:{tab:"学生/家长"}},[s("a-form-model",{attrs:{model:t.studentCredential},on:{submit:t.submitStudent},nativeOn:{submit:function(t){t.preventDefault()}}},[s("a-form-model-item",{attrs:{label:"姓名"}},[s("a-input",{attrs:{name:"username",placeholder:"姓名"},model:{value:t.studentCredential.Username,callback:function(e){t.$set(t.studentCredential,"Username",e)},expression:"studentCredential.Username"}},[s("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),s("a-form-model-item",{attrs:{label:"身份证号码"}},[s("a-input-password",{attrs:{name:"password",placeholder:"身份证号码"},model:{value:t.studentCredential.IDCardNum,callback:function(e){t.$set(t.studentCredential,"IDCardNum",e)},expression:"studentCredential.IDCardNum"}},[s("a-icon",{attrs:{slot:"prefix",type:"idcard"},slot:"prefix"})],1)],1),s("a-form-model-item",[s("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 登入 ")])],1)],1)],1),s("a-tab-pane",{key:"2",attrs:{tab:"教师","force-render":""}},[s("a-form-model",{on:{submit:t.submitAdmin},nativeOn:{submit:function(t){t.preventDefault()}},model:{value:t.adminCredential,callback:function(e){t.adminCredential=e},expression:"adminCredential"}},[s("a-form-model-item",{attrs:{label:"管理账号名称"}},[s("a-input",{attrs:{name:"username",placeholder:"用户名"},model:{value:t.adminCredential.Username,callback:function(e){t.$set(t.adminCredential,"Username",e)},expression:"adminCredential.Username"}},[s("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),s("a-form-model-item",{attrs:{label:"密码"}},[s("a-input-password",{attrs:{name:"password",placeholder:"密码"},model:{value:t.adminCredential.Password,callback:function(e){t.$set(t.adminCredential,"Password",e)},expression:"adminCredential.Password"}},[s("a-icon",{attrs:{slot:"prefix",type:"key"},slot:"prefix"})],1)],1),s("a-form-model-item",[s("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 登入 ")])],1)],1)],1)],1)],1)},y=[],C=(s("498a"),{handleNetworkErr:function(t,e){var s,a=e.$createElement;return t.response?(211==t.response.data.ErrorCode&&(e.$store.commit("logout"),u.$emit("logout")),s=t.response.data.ErrorCode?a("table",{},[a("tr",{},[a("td","编号:"),a("td",t.response.data.ErrorCode)]),a("tr",{},[a("td","原因:"),a("td",t.response.data.Msg)])]):a("table",{},[a("tr",{},[a("td","状态:"),a("td",t.response.status)]),a("tr",{},[a("td",{attrs:{colspan:2}},JSON.stringify(t.response.data))])])):t.request?(s="不能与服务器通信。请检查您的网络连接。",console.log(JSON.stringify(t))):s=t.message,e.$error({title:"操作失败",content:s}),s}}),_={data:function(){return{studentCredential:{Username:"",IDCardNum:""},adminCredential:{Username:"",Password:""}}},methods:{submitStudent:function(){this.sendLoginRequest(this.studentCredential)},submitAdmin:function(){this.sendLoginRequest(this.adminCredential)},sendLoginRequest:function(t){var e=this;t.Username.trim().length<1?this.$message.warning("请填写用户名"):this.$http.post(this.$apiRootURL+"/auth/login",t).then((function(t){var a=s("14b7").decode(t.data.token);e.$store.commit("login",{token:t.data.token,profile:a}),e.$message.success("登入成功"),e.$store.getters.privilege>=3?e.$router.replace("/students/list"):e.$store.getters.privilege>=1&&e.$http.get(e.$apiRootURL+"/students/"+e.$store.state.profile.ID).then((function(t){e.$store.commit("profileUpdate",t.data),e.$router.replace("/students/view")})).catch((function(t){C.handleNetworkErr(t,e)}))})).catch((function(t){C.handleNetworkErr(t,e)}))}},mounted:function(){this.$store.getters.privilege>=3?this.$router.replace("/assignments/list"):this.$store.getters.privilege>=1&&this.$router.replace("/students/view")}},S=_,k=Object(h["a"])(S,v,y,!1,null,null,null),j=k.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"markdown-body",attrs:{id:"md-content"}},[s("h1",[t._v("Nankai-Assignment 作业查询系统 v"+t._s(t.version))]),t._m(0),s("br"),s("p",[t._v("本程序运行所依赖的开放源代码软件，其名称、作者及许可协议列表如下。")]),s("br"),s("p",[t._v("前端部分：")]),t._m(1),s("p",[t._v("后端部分：")]),t._m(2),s("p",[t._v("在此对开放源代码社区的贡献者们坚持理念、日复一日的无偿付出与慷慨奉献表示深切的感谢。")])])},N=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("blockquote",{staticStyle:{"padding-left":"1ch","border-left":"0.5ch solid lightgray"}},[s("p",[t._v("The MIT License (MIT)")]),s("p",[t._v("Copyright (C) 2021 - present zbx1425")]),s("p",[t._v('Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:')]),s("p",[t._v("The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.")]),s("p",[t._v('THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.')])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Vue.js © 2013-present Yuxi (Evan) You, "),s("a",{attrs:{href:"https://github.com/vuejs/vue/blob/dev/LICENSE",target:"_blank"}},[t._v("MIT License")])]),s("li",[t._v("Vue-Router © 2013-present Evan You, "),s("a",{attrs:{href:"https://github.com/vuejs/vue-router/blob/dev/LICENSE",target:"_blank"}},[t._v("MIT License")])]),s("li",[t._v("Vuex © 2015-present Evan You, "),s("a",{attrs:{href:"https://github.com/vuejs/vuex/blob/dev/LICENSE",target:"_blank"}},[t._v("MIT License")])]),s("li",[t._v("Ant Design © 2016-2020 2015-present Ant UED, "),s("a",{attrs:{href:"https://github.com/ant-design/ant-design/blob/master/LICENSE",target:"_blank"}},[t._v("MIT License")])]),s("li",[t._v("Ant-Design-Vue © 2017-present ant-design-vue, "),s("a",{attrs:{href:"https://github.com/vueComponent/ant-design-vue/blob/next/LICENSE",target:"_blank"}},[t._v("MIT License")])]),s("li",[t._v("Axios © 2014-present Matt Zabriskie, "),s("a",{attrs:{href:"https://github.com/axios/axios/blob/master/LICENSE",target:"_blank"}},[t._v("MIT License")])]),s("li",[t._v("JSONWebToken © 2015 Auth0, Inc., "),s("a",{attrs:{href:"https://github.com/auth0/node-jsonwebtoken/blob/master/LICENSE",target:"_blank"}},[t._v("MIT License")])]),s("li",[t._v("Core-JS © 2014-2020 Denis Pushkarev, "),s("a",{attrs:{href:"https://github.com/zloirock/core-js/blob/master/LICENSE",target:"_blank"}},[t._v("MIT License")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("GORM © 2013-NOW Jinzhu, "),s("a",{attrs:{href:"https://github.com/go-gorm/gorm/blob/master/License",target:"_blank"}},[t._v("MIT License")])]),s("li",[t._v("Gin © 2014 Manuel Martínez-Almeida, "),s("a",{attrs:{href:"https://github.com/gin-gonic/gin/blob/master/LICENSE",target:"_blank"}},[t._v("MIT License")])]),s("li",[t._v("Gin-JWT © 2016 Bo-Yi Wu, "),s("a",{attrs:{href:"https://github.com/appleboy/gin-jwt/blob/master/LICENSE",target:"_blank"}},[t._v("MIT License")])])])}],w={computed:{version:function(){return"0.2.2"}}},I=w,D=(s("844a"),Object(h["a"])(I,$,N,!1,null,"bb0c0b3e",null)),E=D.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.schoolClass.Name||"请选择班级","sub-title":"学生列表"}}),t.privilege>=3?s("a-form",{attrs:{layout:"inline"}},[s("a-form-model-item",{attrs:{label:"选择班级"}},[s("a-select",{ref:"classInput",staticStyle:{width:"10em"},attrs:{value:this.$route.query.classid?parseInt(this.$route.query.classid):"请选择"},on:{change:t.onClassSelected}},t._l(t.allClasses,(function(e){return s("a-select-option",{key:e.ID,attrs:{value:e.ID}},[t._v(" "+t._s(e.Name)+" ")])})),1)],1)],1):t._e(),t._m(0),s("div",[!t.schoolClass.Students||t.schoolClass.Students.length<1?s("a-empty",{attrs:{description:"未选择班级或此班级尚未录入学生"}}):t._e(),t._l(t.schoolClass.Students,(function(e){return s("a-badge",{key:e.ID,attrs:{count:e.AssignmentCount,offset:[-15,3]}},[s("div",{staticClass:"student-item-wrapper",on:{click:function(s){return t.onCardClick(e.ID)}}},[s("span",[t._v(t._s(e.Sequence.toString().padStart(2,"0")))]),s("span",[t._v(t._s(e.Name))]),t.studentNameMap[e.Name]>1?s("span",[t._v(t._s((e.IDCardNum||"").slice(-4)))]):t._e()])])}))],2)],1)},O=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticStyle:{"margin-top":"1em"}},[s("span",{staticStyle:{display:"inline-block"}},[t._v(" ("),s("span",{staticStyle:{color:"red"}},[t._v("●")]),t._v(": 该学生未完成作业数量; 点击姓名查看详情 ) ")])])}],R=(s("4e82"),s("159b"),{data:function(){return{schoolClass:{Students:[]},studentNameMap:{},allClasses:[]}},methods:{fetchClass:function(t){var e=this;this.$http.get(this.$apiRootURL+"/classes/"+t+"/students").then((function(t){e.schoolClass=t.data,e.schoolClass.Students||(e.schoolClass.Students=[]),e.schoolClass.Students.sort((function(t,e){return t.Sequence-e.Sequence})),e.studentNameMap={},e.schoolClass.Students.forEach((function(t){e.studentNameMap[t.Name]?e.studentNameMap[t.Name]++:e.studentNameMap[t.Name]=1}))})).catch((function(t){C.handleNetworkErr(t,e)}))},fetchClasses:function(){var t=this;this.$http.get(this.$apiRootURL+"/classes").then((function(e){t.allClasses=e.data})).catch((function(e){C.handleNetworkErr(e,t)}))},onLoad:function(t){this.$store.getters.privilege>=3?(this.fetchClasses(),t?this.fetchClass(t):this.schoolClass={Students:[]}):this.$router.replace("/")},onClassSelected:function(t){t!=parseInt(this.$route.query.classid||"0")&&this.$router.replace("/students/list?classid="+t)},onCardClick:function(t){this.$router.replace("/students/view/"+t)}},computed:Object(l["a"])({},Object(d["b"])(["privilege"])),mounted:function(){this.onLoad(this.$route.query.classid)},beforeRouteUpdate:function(t,e,s){this.onLoad(t.query.classid),s()}}),L=R,T=(s("8ed5"),Object(h["a"])(L,x,O,!1,null,"49d0dc43",null)),A=T.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.profile.Name,"sub-title":"目前未完成的作业"},on:{back:t.headerBackClick}}),s("p",{staticStyle:{"margin-top":"1em"}},[s("a-button",{staticStyle:{"margin-right":"1em"},on:{click:t.setLastRead}},[t._v("全部标记为已读")]),s("a-button",{staticStyle:{"margin-right":"1em"},on:{click:t.reloadProfile}},[t._v("刷新")]),s("span",{staticStyle:{display:"inline-block"}},[t._v(" ( "),s("a-icon",{attrs:{type:"user"}}),t._v(": 未完成此作业的总人数; "),s("span",{staticStyle:{color:"red"}},[t._v("●")]),t._v(": 未读信息 ) ")],1)],1),s("a-list",{attrs:{"item-layout":"horizontal","data-source":t.profile.Assignments,locale:{emptyText:"您目前没有未完成的作业"},pagination:{position:"both",size:"small",pageSize:20}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return s("a-list-item",{},[s("a-list-item-meta",[s("span",{staticStyle:{"font-size":"1.5em","font-weight":"bold"},attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.Name)+" ")]),s("span",{attrs:{slot:"description"},slot:"description"},[s("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e.Subject))]),s("span",[s("a-icon",{attrs:{type:"calendar"}}),t._v(" "+t._s(new Date(e.Date).toISOString().split("T")[0]))],1),s("span",{staticStyle:{"margin-left":"1em"}},[s("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(e.StudentCount))],1)],1),s("a-badge",{attrs:{slot:"avatar",dot:e.Date>=t.lastread},slot:"avatar"},[s("a-avatar",{staticStyle:{backgroundColor:"#87d068"}},[t._v(" "+t._s(e.Subject[0])+" ")])],1)],1)],1)}}])}),s("br")],1)},M=[],U={data:function(){return{profile:{Assignments:[]}}},computed:{lastread:function(){return this.$store.state.lastread}},methods:{fetchProfile:function(t){var e=this;this.$http.get(this.$apiRootURL+"/students/"+t+"/assignments").then((function(t){t.data||(t.data={}),t.data.Assignments||(t.data.Assignments=[]),t.data.Assignments.forEach((function(t){return t.Date=Date.parse(t.Date)})),t.data.Assignments.sort((function(t,e){return e.Date-t.Date}));var s=!e.profile.ID||JSON.stringify(e.profile)!=JSON.stringify(t.data);s&&(e.profile.ID&&e.$message.success("信息已更新"),e.profile=t.data,e.$store.getters.privilege<3&&e.$store.state.profile&&e.$store.state.profile.ID==e.profile.ID&&e.$store.commit("profileUpdate",e.profile))})).catch((function(t){t.response&&t.response.data&&t.response.data.ErrorCode&&201==t.response.data.ErrorCode&&e.$store.getters.privilege<3?(e.$store.commit("logout"),u.$emit("logout")):C.handleNetworkErr(t,e)}))},setLastRead:function(){this.$store.commit("setLastRead",Date.now()),this.$message.success("已将事项标记为已读")},headerBackClick:function(){console.log(this),this.$route.params.id&&this.$router.replace("/students/list?classid="+this.profile.ClassID)},reloadProfile:function(){this.fetchProfile(this.profile.ID),this.$message.success("信息已更新")}},mounted:function(){var t=this;this.$store.getters.privilege>=3?this.$route.params.id&&this.fetchProfile(this.$route.params.id):this.$store.getters.privilege>=1&&this.$store.state.profile.ID?(this.fetchProfile(this.$store.state.profile.ID),this.timer?clearInterval(this.timer):this.timer=setInterval((function(){t.fetchProfile(t.$store.state.profile.ID)}),3e4)):this.$router.replace("/")},destroyed:function(){this.timer&&clearInterval(this.timer)}},z=U,q=Object(h["a"])(z,P,M,!1,null,null,null),F=q.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.schoolClass.Name||"请选择班级","sub-title":"作业布置列表"}}),t.privilege>=3?s("a-form",{attrs:{layout:"inline"}},[s("a-form-model-item",{attrs:{label:"选择班级"}},[s("a-select",{ref:"classInput",staticStyle:{width:"10em"},attrs:{value:this.$route.query.classid?parseInt(this.$route.query.classid):"请选择"},on:{change:t.onClassSelected}},t._l(t.allClasses,(function(e){return s("a-select-option",{key:e.ID,attrs:{value:e.ID}},[t._v(" "+t._s(e.Name)+" ")])})),1)],1)],1):t._e(),t.privilege>=2?s("p",{staticStyle:{"margin-top":"1em"}},[s("a-button",{staticStyle:{"margin-right":"1em"},attrs:{type:"primary"},on:{click:t.onNewAssignment}},[t._v("新增作业")]),s("span",{staticStyle:{display:"inline-block"}},[t._v(" ( "),s("a-icon",{attrs:{type:"user"}}),t._v(": 未完成此作业的总人数; 点击标题以编辑) ")],1)],1):t._e(),s("a-list",{attrs:{"item-layout":"horizontal","data-source":t.schoolClass.Assignments,locale:{emptyText:"本班目前还未布置任何作业"},pagination:{position:"both",size:"small",pageSize:20}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return s("a-list-item",{},[s("a-list-item-meta",{on:{click:function(s){return t.onItemClick(e.ID)}}},[s("span",{staticStyle:{"font-size":"1.5em","font-weight":"bold"},attrs:{slot:"title"},slot:"title"},[t.privilege>=2?s("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(e.Name))]):s("span",[t._v(t._s(e.Name))])]),s("span",{attrs:{slot:"description"},slot:"description"},[s("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e.Subject))]),s("span",[s("a-icon",{attrs:{type:"calendar"}}),t._v(" "+t._s(new Date(e.Date).toISOString().split("T")[0]))],1),s("span",{staticStyle:{"margin-left":"1em"}},[s("a-icon",{attrs:{type:"user"}}),t._v(" "+t._s(e.StudentCount))],1)],1),s("a-avatar",{staticStyle:{backgroundColor:"#87d068"},attrs:{slot:"avatar"},slot:"avatar"},[t._v(" "+t._s(e.Subject[0])+" ")])],1)],1)}}])})],1)},B=[],W={data:function(){return{schoolClass:{Assignments:[]},allClasses:[]}},methods:{fetchAssignments:function(t){var e=this;this.$http.get(this.$apiRootURL+"/classes/"+t+"/assignments").then((function(t){e.schoolClass=t.data,e.schoolClass.Assignments||(e.schoolClass.Assignments=[]),e.schoolClass.Assignments.forEach((function(t){return t.Date=Date.parse(t.Date)})),e.schoolClass.Assignments.sort((function(t,e){return e.Date-t.Date}))})).catch((function(t){C.handleNetworkErr(t,e)}))},fetchClasses:function(){var t=this;this.$http.get(this.$apiRootURL+"/classes").then((function(e){t.allClasses=e.data})).catch((function(e){C.handleNetworkErr(e,t)}))},onLoad:function(t){this.$store.getters.privilege>=3?(this.fetchClasses(),t?this.fetchAssignments(t):this.schoolClass={Assignments:[]}):this.$store.state.profile.ClassID&&this.fetchAssignments(this.$store.state.profile.ClassID)},onItemClick:function(t){this.$store.getters.privilege>=2&&this.$router.replace("/assignments/edit/"+t)},onNewAssignment:function(){this.$route.query.classid&&this.$store.getters.privilege>=2?this.$router.replace("/assignments/edit?classid="+this.$route.query.classid):this.$router.replace("/assignments/edit")},onClassSelected:function(t){t!=parseInt(this.$route.query.classid||"0")&&this.$router.replace("/assignments/list?classid="+t)}},computed:Object(l["a"])({},Object(d["b"])(["privilege"])),mounted:function(){this.onLoad(this.$route.query.classid)},beforeRouteUpdate:function(t,e,s){this.onLoad(t.query.classid),s()}},H=W,J=Object(h["a"])(H,V,B,!1,null,null,null),Y=J.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.assignment.Name||"...","sub-title":t.assignment.Subject||"..."},on:{back:t.headerBackClick}}),s("a-form-model",{staticStyle:{"margin-top":"2em"},attrs:{layout:"inline"},on:{submit:t.submitForm},nativeOn:{submit:function(t){t.preventDefault()}},model:{value:t.assignment,callback:function(e){t.assignment=e},expression:"assignment"}},[s("a-form-model-item",{staticStyle:{width:"100%"},attrs:{label:"名称"}},[s("a-input",{ref:"nameInput",staticStyle:{width:"100%","min-width":"22em"},attrs:{placeholder:"名称"},model:{value:t.assignment.Name,callback:function(e){t.$set(t.assignment,"Name",e)},expression:"assignment.Name"}},[s("a-icon",{attrs:{slot:"prefix",type:"snippets"},slot:"prefix"})],1)],1),s("br"),s("a-form-model-item",{attrs:{label:"科目"}},[s("a-select",{ref:"subjectInput",staticStyle:{width:"6em"},model:{value:t.assignment.Subject,callback:function(e){t.$set(t.assignment,"Subject",e)},expression:"assignment.Subject"}},t._l(t.subjects,(function(e){return s("a-select-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),s("a-form-model-item",{attrs:{label:"日期"}},[s("a-date-picker",{ref:"dateInput",model:{value:t.assignment.Date,callback:function(e){t.$set(t.assignment,"Date",e)},expression:"assignment.Date"}})],1),s("br"),s("p",[t._v("未交学生: ")]),s("a-form-model-item",[s("a-checkbox-group",{model:{value:t.editingStudents,callback:function(e){t.editingStudents=e},expression:"editingStudents"}},[!t.schoolClass.Students||t.schoolClass.Students.length<1?s("a-empty",{attrs:{description:"未选择班级或此班级尚未录入学生"}}):t._e(),t._l(t.schoolClass.Students,(function(e){return s("div",{key:e.ID,staticClass:"student-item-wrapper"},[s("a-checkbox",{attrs:{value:e.ID}},[s("span",[t._v(t._s(e.Sequence.toString().padStart(2,"0")))]),s("span",[t._v(t._s(e.Name))]),t.studentNameMap[e.Name]>1?s("span",[t._v(t._s((e.IDCardNum||"").slice(-4)))]):t._e()])],1)}))],2)],1),s("div",{staticStyle:{background:"#ccc",border:"1px solid #aaa",padding:"0.2em","margin-top":"2em","margin-bottom":"1em"}},[t._v(" 已选 "+t._s(t.editingStudents.length)+" 人: "),t._l(t.editingStudents,(function(e){return s("a-tag",{key:e,attrs:{closable:""},on:{close:function(s){return t.unselectStudent(e)}}},[t.studentIDMap[e]?s("span",[s("span",{staticStyle:{color:"#aaa"}},[t._v(t._s(t.studentIDMap[e].Sequence))]),t._v(" "+t._s(t.studentIDMap[e].Name)+" ")]):t._e()])}))],2),s("a-form-model-item",[t.schoolClass.Students&&t.schoolClass.Students.length?s("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v("保存")]):s("p",[t._v("请先返回选择一个班级，才能向对应班级添加作业。")]),t.assignment.ID?s("a-popconfirm",{attrs:{title:"确认要删除这一作业吗?","ok-text":"删除","cancel-text":"取消"},on:{confirm:t.deleteAssignment}},[s("a-button",{staticStyle:{"margin-left":"6em"},attrs:{type:"danger"}},[t._v("删除")])],1):t._e()],1)],1)],1)},K=[],X=(s("4de4"),s("d81d"),s("a434"),{data:function(){return{subjects:["重要","语文","数学","英语","物理","化学","生物","历史","地理","政治","其他"],editingStudents:[],studentIDMap:{},studentNameMap:{},assignment:{Students:[],Date:(new Date).toISOString()},schoolClass:{Students:[]}}},methods:{fetchClass:function(t){var e=this;this.$http.get(this.$apiRootURL+"/classes/"+t+"/students").then((function(t){e.schoolClass=t.data,e.schoolClass.Students||(e.schoolClass.Students=[]),e.schoolClass.Students.sort((function(t,e){return t.Sequence-e.Sequence})),e.studentIDMap={},e.schoolClass.Students.forEach((function(t){return e.studentIDMap[t.ID]=t})),e.studentNameMap={},e.schoolClass.Students.forEach((function(t){e.studentNameMap[t.Name]?e.studentNameMap[t.Name]++:e.studentNameMap[t.Name]=1})),e.editingStudents=e.editingStudents.filter((function(t){return t in e.studentIDMap}))})).catch((function(t){C.handleNetworkErr(t,e)}))},fetchAssignment:function(t){var e=this;this.$http.get(this.$apiRootURL+"/assignments/"+t+"/students").then((function(t){e.assignment=t.data,e.assignment.Students||(e.assignment.Students=[]),e.editingStudents=e.assignment.Students.map((function(t){return t.ID})),e.fetchClass(e.assignment.ClassID)})).catch((function(t){C.handleNetworkErr(t,e)}))},submitForm:function(){var t,e=this;this.assignment.Name&&this.assignment.Subject?(this.assignment.Students=this.editingStudents.map((function(t){return{ID:t}})),t=this.assignment.ID?this.$http.post(this.$apiRootURL+"/assignments/"+this.assignment.ID,this.assignment):this.$http.put(this.$apiRootURL+"/classes/"+this.schoolClass.ID+"/assignments",this.assignment),t.then((function(){e.$message.success("保存成功"),e.headerBackClick()})).catch((function(t){C.handleNetworkErr(t,e)}))):this.$message.warning("名称、科目不能为空")},deleteAssignment:function(){var t=this;this.assignment.ID&&this.$http.delete(this.$apiRootURL+"/assignments/"+this.assignment.ID).then((function(){t.$message.success("已删除"),t.headerBackClick()})).catch((function(e){C.handleNetworkErr(e,t)}))},headerBackClick:function(){this.$route.query.classid?this.$router.replace("/assignments/list?classid="+this.$route.query.classid):this.$store.getters.privilege>=3&&this.assignment.ClassID?this.$router.replace("/assignments/list?classid="+this.assignment.ClassID):this.$router.replace("/assignments/list")},unselectStudent:function(t){var e=this.editingStudents.indexOf(t);e>-1&&this.editingStudents.splice(e,1)}},mounted:function(){this.$store.getters.privilege>=2&&this.$route.params.id?this.fetchAssignment(this.$route.params.id):(this.$store.getters.privilege>=3?this.$route.query.classid&&this.fetchClass(this.$route.query.classid):this.$store.getters.privilege>=2&&this.$store.state.profile.ClassID?this.fetchClass(this.$store.state.profile.ClassID):this.$router.replace("/"),this.assignment.Date=(new Date).toISOString())}}),Z=X,Q=(s("611d"),s("6725"),Object(h["a"])(Z,G,K,!1,null,"4a57478e",null)),tt=Q.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"班级列表"}}),s("p",{staticStyle:{"margin-top":"1em"}},[s("a-button",{staticStyle:{"margin-right":"1em"},attrs:{type:"primary"},on:{click:function(e){t.setEditingClass(null),t.renamingDialogVisible=!0}}},[t._v("新增班级")])],1),s("a-list",{attrs:{bordered:"","data-source":t.allClasses,locale:{emptyText:"系统内还未添加任何班级"}},scopedSlots:t._u([{key:"renderItem",fn:function(e){return s("a-list-item",{},[s("a",{attrs:{slot:"actions"},on:{click:function(s){t.setEditingClass(e),t.renamingDialogVisible=!0}},slot:"actions"},[t._v("重命名")]),s("a",{attrs:{slot:"actions"},on:{click:function(s){t.setEditingClass(e),t.uploadDialogVisible=!0}},slot:"actions"},[t._v("上传名单")]),s("a-popconfirm",{attrs:{slot:"actions",title:"确定要删除这个班级吗? 连带着的,将同时删除其所有学生和作业布置,不可恢复!","ok-text":"删除","cancel-text":"取消"},on:{confirm:function(s){return t.deleteClass(e.ID)}},slot:"actions"},[s("a",{attrs:{href:"#"}},[t._v("删除")])]),s("a-list-item-meta",[s("span",{staticStyle:{"font-size":"1.5em","font-weight":"bold"},attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.Name)+" ")])])],1)}}])}),s("a-modal",{attrs:{title:"上传名单",okButtonProps:{style:{display:"none"}},cancelText:"取消"},model:{value:t.uploadDialogVisible,callback:function(e){t.uploadDialogVisible=e},expression:"uploadDialogVisible"}},[s("p",[t._v("为 "),s("b",[t._v(t._s(t.editingClass.Name))]),t._v(" 上传学生名单。")]),s("p",[t._v("学生名单通过 Excel .XLSX 工作表录入。请下载这一模板, 并填写相应信息后上传, 即可录入班级学生名单。"),s("br"),t._v(" 如需移除学生: 录入时已在系统内但未在新上传的名单内的学生信息将被自动移除(以身份证号为准)")]),s("p",[s("a-button",{attrs:{href:"https://svc.bvecs.tk:8953/assets/StudentListTemplate.xlsx"}},[s("a-icon",{attrs:{type:"download"}}),t._v("下载模板工作表 ")],1)],1),s("p",[s("a-upload",{attrs:{name:"spreadsheet",action:t.uploadUrl,accept:".xlsx","file-list":t.uploadedFileList,customRequest:t.uploadFiles}},[s("a-button",{attrs:{type:"primary"}},[s("a-icon",{attrs:{type:"upload"}}),t._v("上传录入工作表")],1)],1)],1)]),s("a-modal",{attrs:{title:"设置名称",okText:"确认",cancelText:"取消"},on:{ok:t.confirmNameEdit},model:{value:t.renamingDialogVisible,callback:function(e){t.renamingDialogVisible=e},expression:"renamingDialogVisible"}},[s("a-form-item",{staticStyle:{width:"100%"},attrs:{label:"名称"}},[s("a-input",{ref:"nameInput",staticStyle:{width:"100%","min-width":"22em"},attrs:{placeholder:"名称"},model:{value:t.editingClass.Name,callback:function(e){t.$set(t.editingClass,"Name",e)},expression:"editingClass.Name"}},[s("a-icon",{attrs:{slot:"prefix",type:"edit"},slot:"prefix"})],1)],1)],1)],1)},st=[],at=(s("b0c0"),{data:function(){return{allClasses:[],editingClass:{Name:""},uploadDialogVisible:!1,renamingDialogVisible:!1,uploadedFileList:[]}},computed:{uploadUrl:function(){return this.editingClass?void 0:""}},methods:{fetchClasses:function(){var t=this;this.$http.get(this.$apiRootURL+"/classes").then((function(e){t.allClasses=e.data})).catch((function(e){C.handleNetworkErr(e,t)}))},uploadFiles:function(t){var e=this,s={uid:t.file.uid,name:t.file.name,status:"uploading",response:"",url:""};this.uploadedFileList=[s];var a=this.$apiRootURL+"/classes/"+this.editingClass.ID+"/spreadsheet-upload",n=new FormData;n.append("spreadsheet",t.file),this.$http.post(a,n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){s.status="done",e.$message.success("上传成功"),e.uploadDialogVisible=!1,e.uploadedFileList=[]})).catch((function(t){s.status="error",C.handleNetworkErr(t,e)}))},confirmNameEdit:function(){var t=this;this.editingClass.Name||(this.editingClass.Name=""),this.editingClass.Name=this.editingClass.Name.trim(),this.editingClass.Name.length<1?this.$message.warning("名称不能为空"):this.allClasses.filter((function(e){return e.Name==t.editingClass.Name})).length>0?this.$message.warning("名称不能和已有的重复。如要取消重命名请按取消按钮。"):this.editingClass.ID?this.$http.post(this.$apiRootURL+"/classes/"+this.editingClass.ID,this.editingClass).then((function(){t.$message.success("重命名完成"),t.renamingDialogVisible=!1,t.fetchClasses()})).catch((function(e){C.handleNetworkErr(e,t)})):this.$http.put(this.$apiRootURL+"/classes",this.editingClass).then((function(){t.$message.success("创建完成"),t.renamingDialogVisible=!1,t.fetchClasses()})).catch((function(e){C.handleNetworkErr(e,t)}))},setEditingClass:function(t){t?(this.editingClass.ID=t.ID,this.editingClass.Name=t.Name):(this.editingClass.ID=0,this.editingClass.Name="")}},mounted:function(){this.$store.getters.privilege>=3?this.fetchClasses():this.$router.replace("/")}}),nt=at,it=Object(h["a"])(nt,et,st,!1,null,null,null),ot=it.exports,rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"账号管理与邀请"}}),s("br"),s("a-card",{staticStyle:{width:"100%"},attrs:{title:"密码修改或设定"}},[s("p",[t._v("如果还没有设定密码，旧密码输入框留空即可。")]),s("a-form-model",{attrs:{model:t.modelChange,layout:"inline"},on:{submit:t.changePassword},nativeOn:{submit:function(t){t.preventDefault()}}},[s("a-form-model-item",{attrs:{label:"旧密码"}},[s("a-input-password",{staticStyle:{"min-width":"20em"},attrs:{placeholder:"旧密码"},model:{value:t.modelChange.PreviousPassword,callback:function(e){t.$set(t.modelChange,"PreviousPassword",e)},expression:"modelChange.PreviousPassword"}},[s("a-icon",{attrs:{slot:"prefix",type:"key"},slot:"prefix"})],1)],1),s("a-form-model-item",{attrs:{label:"新密码"}},[s("a-input-password",{staticStyle:{"min-width":"20em"},attrs:{placeholder:"新密码"},model:{value:t.modelChange.NewPassword,callback:function(e){t.$set(t.modelChange,"NewPassword",e)},expression:"modelChange.NewPassword"}},[s("a-icon",{attrs:{slot:"prefix",type:"key"},slot:"prefix"})],1)],1),s("a-form-model-item",{attrs:{label:"确认新密码"}},[s("a-input-password",{staticStyle:{"min-width":"20em"},attrs:{placeholder:"确认新密码"},model:{value:t.modelChange.ConfirmNewPassword,callback:function(e){t.$set(t.modelChange,"ConfirmNewPassword",e)},expression:"modelChange.ConfirmNewPassword"}},[s("a-icon",{attrs:{slot:"prefix",type:"key"},slot:"prefix"})],1)],1),s("a-form-model-item",[s("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 设定/修改 ")])],1)],1)],1),s("br"),s("a-card",{staticStyle:{width:"100%"},attrs:{title:"创建新管理员账号"}},[s("p",[t._v("您可邀请其他人共同参与管理。请注意用户名区分大小写。")]),s("p",[t._v("新账号默认无密码，即对方将密码输入框留空并直接点击登入按钮即可。随后可自行在此页面设定密码。")]),s("a-form-model",{attrs:{model:t.modelCreate,layout:"inline"},on:{submit:t.createAccount},nativeOn:{submit:function(t){t.preventDefault()}}},[s("a-form-model-item",{attrs:{label:"新用户名"}},[s("a-input",{staticStyle:{"min-width":"20em"},attrs:{placeholder:"新用户名"},model:{value:t.modelCreate.Name,callback:function(e){t.$set(t.modelCreate,"Name",e)},expression:"modelCreate.Name"}},[s("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),s("a-form-model-item",[s("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 邀请管理员 ")])],1)],1)],1),s("br"),s("a-card",{staticStyle:{width:"100%"},attrs:{title:"注销账号"}},[s("p",[t._v("注销当前登入的账号。")]),s("a-form-model",{attrs:{model:t.modelDelete,layout:"inline"},on:{submit:t.deleteAccount},nativeOn:{submit:function(t){t.preventDefault()}}},[s("a-form-model-item",{attrs:{label:"确认密码"}},[s("a-input-password",{staticStyle:{"min-width":"20em"},attrs:{placeholder:"确认密码"},model:{value:t.modelDelete.PreviousPassword,callback:function(e){t.$set(t.modelDelete,"PreviousPassword",e)},expression:"modelDelete.PreviousPassword"}},[s("a-icon",{attrs:{slot:"prefix",type:"key"},slot:"prefix"})],1)],1),s("a-form-model-item",[s("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v(" 注销账号 ")])],1)],1)],1),s("a-modal",{attrs:{visible:t.inviteSuccessVisible,cancelButtonProps:{style:{display:"none"}}}},[s("a-result",{staticStyle:{"white-space":"pre-wrap"},attrs:{status:"success",title:"账号'"+t.inviteSuccessName+"'创建成功！","sub-title":"您现在可以告知对方登入了。\n新账号默认无密码，将密码输入框留空并直接点击登入按钮即可。\n如需撤销此操作，您可先登入新账号再注销。"}})],1)],1)},lt=[],ct={data:function(){return{modelChange:{PreviousPassword:"",NewPassword:"",ConfirmNewPassword:""},modelCreate:{Name:""},modelDelete:{PreviousPassword:""},inviteSuccessName:"",inviteSuccessVisible:!1}},methods:{changePassword:function(){var t=this;this.modelChange.NewPassword==this.modelChange.ConfirmNewPassword?this.$http.post(this.$apiRootURL+"/auth/change_password",this.modelChange).then((function(){t.modelChange={PreviousPassword:"",NewPassword:"",ConfirmNewPassword:""},t.$message.success("密码更改完成")})).catch((function(e){C.handleNetworkErr(e,t)})):this.$message.warning("两次输入的密码不一致")},createAccount:function(){var t=this;this.modelCreate.Name.trim().length<1?this.$message.warning("请填写用户名"):this.$http.post(this.$apiRootURL+"/auth/create_account",this.modelCreate).then((function(){t.inviteSuccessName=t.modelCreate.Name,t.inviteSuccessVisible=!0,t.modelCreate={Name:""}})).catch((function(e){C.handleNetworkErr(e,t)}))},deleteAccount:function(){var t=this;this.$http.post(this.$apiRootURL+"/auth/delete_account",this.modelDelete).then((function(){t.$store.commit("logout"),u.$emit("logout"),t.$message.success("账号注销完成")})).catch((function(e){C.handleNetworkErr(e,t)}))}}},ut=ct,dt=Object(h["a"])(ut,rt,lt,!1,null,null,null),mt=dt.exports;a["a"].use(b["a"]);var pt=[{path:"/",name:"Login",component:j},{path:"/students/list",name:"Student List",component:A},{path:"/students/view/:id?",name:"Student View",component:F},{path:"/assignments/list",name:"Assignment List",component:Y},{path:"/assignments/edit/:id?",name:"Assignment Edit",component:tt},{path:"/classes/list",name:"Class List",component:ot},{path:"/account",name:"Account Management",component:mt},{path:"/about",name:"About",component:E}],ht=new b["a"]({routes:pt}),ft=ht,gt=s("f23d");s("3aed");a["a"].use(d["a"]);var bt=new d["a"].Store({state:{token:localStorage.getItem("JWT_TOKEN")||"",profile:JSON.parse(localStorage.getItem("PROFILE"))||null,lastread:Date.parse(localStorage.getItem("LAST_READ"))||0},mutations:{login:function(t,e){t.token=e.token,t.profile=e.profile,localStorage.setItem("JWT_TOKEN",t.token),localStorage.setItem("PROFILE",JSON.stringify(t.profile))},refreshToken:function(t,e){t.token=e},profileUpdate:function(t,e){t.profile=e,localStorage.setItem("PROFILE",JSON.stringify(t.profile))},logout:function(t){t.token="",t.profile=null,localStorage.removeItem("JWT_TOKEN"),localStorage.removeItem("PROFILE")},setLastRead:function(t,e){t.lastread=e}},getters:{privilege:function(t){return t.profile&&t.profile.ID?t.profile["IsAdmin"]?3:t.profile["IsManager"]?2:1:0}},actions:{},modules:{}});a["a"].config.productionTip=!1,a["a"].use(gt["a"]),i.a.interceptors.request.use((function(t){return u.$emit("setNetworkOverlay",!0),localStorage.JWT_TOKEN&&(t.headers.Authorization="Bearer ".concat(localStorage.JWT_TOKEN)),t}),(function(t){return u.$emit("setNetworkOverlay",!1),Promise.reject(t)})),i.a.interceptors.response.use((function(t){return u.$emit("setNetworkOverlay",!1),t}),(function(t){return u.$emit("setNetworkOverlay",!1),Promise.reject(t)})),a["a"].prototype.$http=i.a,a["a"].prototype.$apiRootURL="https://nkzx.zbx1425.cn/assignment/api/v1",new a["a"]({router:ft,store:bt,render:function(t){return t(g)}}).$mount("#app")},6:function(t,e){},"611d":function(t,e,s){"use strict";s("8322")},6725:function(t,e,s){"use strict";s("906c")},7:function(t,e){},8:function(t,e){},8322:function(t,e,s){},"844a":function(t,e,s){"use strict";s("15cd")},"8ed5":function(t,e,s){"use strict";s("9fc5")},9:function(t,e){},"906c":function(t,e,s){},"9fc5":function(t,e,s){},ef79:function(t,e,s){"use strict";s("0781")}});